# ìºë¦­í„° í‘œì • ì‹œìŠ¤í…œ ì‚¬ìš© ì˜ˆì œ

## ìžë™ ê°ì • ê°ì§€ ì˜ˆì œ

ì‹œìŠ¤í…œì´ ìžë™ìœ¼ë¡œ ê°ì§€í•˜ëŠ” ëŒ€í™” ì˜ˆì œë“¤ìž…ë‹ˆë‹¤.

### ðŸ˜Š smile (ë¯¸ì†Œ)
```
"ì¢‹ì•„, ê°™ì´ ê°€ìž!"
"ì‘, ê´œì°®ì•„."
"ê³ ë§ˆì›Œ, ë„¤ ë•ë¶„ì´ì•¼."
"ë‹¤í–‰ì´ë„¤!"
```

### ðŸ˜„ laugh (ì›ƒìŒ)
```
"í•˜í•˜í•˜! ì •ë§ ìž¬ë°Œì–´!"
"í˜¸í˜¸, ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´."
"ì™„ì „ ëŒ€ë°•ì´ì•¼!"
"ì‹ ë‚œë‹¤! ìµœê³ ì•¼!"
```

### ðŸ”¥ anger (í™”ë‚¨)
```
"í™”ë‚˜! ì™œ ê·¸ëŸ° ê±°ì•¼?"
"ì§œì¦ë‚˜ì„œ ëª» ì°¸ê² ì–´!"
"ì •ë§ ì—´ë°›ëŠ”ë‹¤!"
"ì‹«ì–´! ì ˆëŒ€ ì•ˆ í•  ê±°ì•¼!"
```

### ðŸ˜¢ sad (ìŠ¬í””)
```
"ìŠ¬í¼... ëˆˆë¬¼ì´ ë‚˜."
"íž˜ë“¤ì–´ì„œ ìš¸ ê²ƒ ê°™ì•„."
"ì™¸ë¡œì›Œ..."
"ë„ˆë¬´ ê´´ë¡œì›Œ."
```

### ðŸ˜° worry (ê±±ì •)
```
"ê±±ì •ë¼... ì–´ë–¡í•˜ì§€?"
"ë¶ˆì•ˆí•´. ê´œì°®ì„ê¹Œ?"
"ë¬´ì„œì›Œ... ë–¨ë ¤."
"ì¡°ì‹¬í•´ì•¼ í•  ê²ƒ ê°™ì•„."
```

### ðŸ˜³ embarrassed (ë‹¹í™©)
```
"ì–´? ë‹¹í™©ìŠ¤ëŸ¬ìš´ë°..."
"ì–´ìƒ‰í•˜ë„¤..."
"ë‚œì²˜í•œë°... ì–´ë–¡í•˜ì§€?"
"í—·ê°ˆë ¤..."
```

### ðŸ˜Š blush (ë¶€ë„ëŸ¬ì›€)
```
"ë¶€ë„ëŸ¬ì›Œ... ì–¼êµ´ì´ ë¹¨ê°œì ¸."
"ì‘¥ìŠ¤ëŸ½ë„¤..."
"ë¯¼ë§í•´ ì£½ê² ì–´!"
"ì°½í”¼í•´..."
```

### ðŸ¤” thinking (ìƒê°)
```
"ìŒ... ìƒê°í•´ë³´ìž."
"ê¸€ìŽ„, ì–´ë–»ê²Œ í•´ì•¼ í•˜ì§€?"
"ì™œ ê·¸ëŸ´ê¹Œ?"
"ê³ ë¯¼ë˜ë„¤..."
```

### ðŸ˜² surprise (ë†€ëžŒ)
```
"ì™€! ê¹œì§ì´ì•¼!"
"í—‰, ë†€ë¼ì›Œ!"
"ì–´ë¨¸, ì„¸ìƒì—!"
"ì •ë§? ë¯¿ì„ ìˆ˜ ì—†ì–´!"
```

## ì‹¤ì œ ìŠ¤í† ë¦¬ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì œ

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë¡œë§¨ìŠ¤ ìž¥ë©´
```json
{
  "dialogues": [
    {
      "character_name": "ì—¬ì£¼ì¸ê³µ",
      "text_template": "ì˜¤ëŠ˜ ë‚ ì”¨ ì •ë§ ì¢‹ë‹¤! ê°™ì´ ì‚°ì±…í• ëž˜?",
      "emotion": "smile"
    },
    {
      "character_name": "ì—¬ì£¼ì¸ê³µ",
      "text_template": "í•˜í•˜í•˜! ë„¤ê°€ ê·¸ëŸ° ë†ë‹´ì„ í•˜ë‹¤ë‹ˆ ì™„ì „ ì›ƒê²¨!",
      "emotion": "laugh"
    },
    {
      "character_name": "ì—¬ì£¼ì¸ê³µ",
      "text_template": "ì•„... ë¶€ë„ëŸ¬ì›Œ. ì–¼êµ´ì´ ë¹¨ê°œì§€ìž–ì•„...",
      "emotion": "blush"
    }
  ]
}
```

**ê²°ê³¼**: smile â†’ laugh â†’ blush ìˆœì„œë¡œ í‘œì • ë³€í™”

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸´ìž¥ê° ìžˆëŠ” ìž¥ë©´
```json
{
  "dialogues": [
    {
      "character_name": "ì£¼ì¸ê³µ",
      "text_template": "ì´ìƒí•œ ì†Œë¦¬ê°€ ë“¤ë ¤... ë¬´ì„œì›Œ.",
      "emotion": "worry"
    },
    {
      "character_name": "ì£¼ì¸ê³µ",
      "text_template": "í—‰! ê¹œì§ì´ì•¼! ë„ˆì˜€êµ¬ë‚˜!",
      "emotion": "surprise"
    },
    {
      "character_name": "ì£¼ì¸ê³µ",
      "text_template": "í•˜... ë‹¤í–‰ì´ë‹¤. ì•ˆì‹¬í–ˆì–´.",
      "emotion": "smile"
    }
  ]
}
```

**ê²°ê³¼**: worry â†’ surprise â†’ smile ìˆœì„œë¡œ í‘œì • ë³€í™”

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê°ˆë“± ìž¥ë©´
```json
{
  "dialogues": [
    {
      "character_name": "ë¼ì´ë²Œ",
      "text_template": "ì™œ ë‚´ ë§ì„ ì•ˆ ë“£ëŠ” ê±°ì•¼? í™”ë‚˜!",
      "emotion": "anger"
    },
    {
      "character_name": "ë¼ì´ë²Œ",
      "text_template": "ì–´... ê·¸ê²Œ ì•„ë‹ˆë¼... ë‹¹í™©ìŠ¤ëŸ¬ì›Œ.",
      "emotion": "embarrassed"
    },
    {
      "character_name": "ë¼ì´ë²Œ",
      "text_template": "ë¯¸ì•ˆí•´... ë‚´ê°€ ë„ˆë¬´ ì‹¬í–ˆì–´. ìŠ¬í¼.",
      "emotion": "sad"
    }
  ]
}
```

**ê²°ê³¼**: anger â†’ embarrassed â†’ sad ìˆœì„œë¡œ í‘œì • ë³€í™”

## ë°±ì—”ë“œ API ì‘ë‹µ ì˜ˆì œ

### ìžë™ ê°ì§€ ëª¨ë“œ (emotion í•„ë“œ ì—†ìŒ)
```json
{
  "scene_id": "scene_001",
  "dialogues": [
    {
      "id": "dialogue_001",
      "text_template": "ì™€! ì •ë§ ë†€ë¼ì›Œ! ì´ëŸ´ ìˆ˜ê°€!",
      "character_name": "ì£¼ì¸ê³µ"
    }
  ]
}
```
â†’ ì‹œìŠ¤í…œì´ "ë†€"ê³¼ "ë†€ë¼ì›Œ"ë¥¼ ê°ì§€í•˜ì—¬ ìžë™ìœ¼ë¡œ `surprise` ì ìš©

### ìˆ˜ë™ ì§€ì • ëª¨ë“œ (emotion í•„ë“œ ìžˆìŒ)
```json
{
  "scene_id": "scene_001",
  "dialogues": [
    {
      "id": "dialogue_001",
      "text_template": "ì¢‹ì•„.",
      "character_name": "ì£¼ì¸ê³µ",
      "emotion": "smile"
    }
  ]
}
```
â†’ APIì—ì„œ ì§€ì •í•œ `smile` í‘œì • ì§ì ‘ ì‚¬ìš©

### í˜¼í•© ëª¨ë“œ
```json
{
  "scene_id": "scene_001",
  "dialogues": [
    {
      "id": "dialogue_001",
      "text_template": "ì¢‹ì•„!",
      "character_name": "ì£¼ì¸ê³µ",
      "emotion": "laugh"
    },
    {
      "id": "dialogue_002",
      "text_template": "í•˜ì§€ë§Œ... ì¡°ê¸ˆ ê±±ì •ë¼.",
      "character_name": "ì£¼ì¸ê³µ"
    }
  ]
}
```
â†’ ì²« ë²ˆì§¸ëŠ” `laugh` ì§ì ‘ ì§€ì •, ë‘ ë²ˆì§¸ëŠ” "ê±±ì •"ì„ ê°ì§€í•˜ì—¬ ìžë™ìœ¼ë¡œ `worry` ì ìš©

## ë³µí•© ê°ì • ì²˜ë¦¬

í•œ ëŒ€ì‚¬ì— ì—¬ëŸ¬ ê°ì •ì´ ìžˆì„ ê²½ìš°, ê°€ìž¥ ë§Žì´ ë§¤ì¹­ëœ ê°ì •ì´ ì„ íƒë©ë‹ˆë‹¤.

### ì˜ˆì œ 1: í™”ë‚¨ê³¼ ë†€ëžŒ
```
"ê¹œì§ì´ì•¼! ì™œ ê·¸ëž˜! í™”ë‚˜!"
```
â†’ "ê¹œì§" (surprise), "í™”ë‚˜" (anger) â†’ anger ì„ íƒ (í‚¤ì›Œë“œ ì ìˆ˜ê°€ ë” ë†’ìŒ)

### ì˜ˆì œ 2: ì›ƒìŒê³¼ ë¯¸ì†Œ
```
"í•˜í•˜í•˜! ì¢‹ì•„ ì¢‹ì•„!"
```
â†’ "í•˜í•˜í•˜" (laugh), "ì¢‹ì•„" (smile) â†’ laugh ì„ íƒ

### ì˜ˆì œ 3: ê°ì •ì´ ì—†ëŠ” ê²½ìš°
```
"ê·¸ëž˜."
```
â†’ ê°ì • í‚¤ì›Œë“œ ì—†ìŒ â†’ ê¸°ë³¸ê°’ `smile` ì ìš©

## í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì œ
```typescript
import { detectEmotion } from './utils/emotionDetector';

// Test 1: ëª…í™•í•œ ê°ì •
expect(detectEmotion("í™”ê°€ ë‚˜!")).toBe('anger');
expect(detectEmotion("í•˜í•˜í•˜ ìž¬ë°Œì–´!")).toBe('laugh');
expect(detectEmotion("ìŠ¬í¼ì„œ ëˆˆë¬¼ì´ ë‚˜")).toBe('sad');

// Test 2: ë³µí•© ê°ì •
expect(detectEmotion("ì›ƒê¸°ê¸´ í•œë° ì¡°ê¸ˆ í™”ë‚˜")).toBe('anger');

// Test 3: ê°ì • ì—†ìŒ
expect(detectEmotion("ê·¸ëž˜.")).toBe('smile');

// Test 4: ë¹ˆ ë¬¸ìžì—´
expect(detectEmotion("")).toBe('smile');
```

### í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
```typescript
// 1. ê²Œìž„ ì‹œìž‘
// 2. ì²« ëŒ€í™”: "ì•ˆë…•! ë°˜ê°€ì›Œ!" â†’ smile
// 3. ë‹¤ìŒ ëŒ€í™”: "í•˜í•˜í•˜! ì •ë§ ì‹ ë‚˜!" â†’ laugh
// 4. ë‹¤ìŒ ëŒ€í™”: "ì–´? ë‹¹í™©ìŠ¤ëŸ¬ìš´ë°..." â†’ embarrassed
// 5. í‘œì • ë³€í™” í™•ì¸: smile â†’ laugh â†’ embarrassed
```

## ë””ë²„ê¹… íŒ

### ê°ì • ê°ì§€ í™•ì¸
ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ê°ì • ê°ì§€ë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:

```javascript
import { detectEmotionWithConfidence } from './utils/emotionDetector';

const result = detectEmotionWithConfidence("ì™€! ë†€ë¼ì›Œ!");
console.log(result);
// {
//   emotion: 'surprise',
//   confidence: 1.0,
//   scores: { anger: 0, laugh: 0, smile: 0, sad: 0, worry: 0,
//             embarrassed: 0, blush: 0, thinking: 0, surprise: 2 }
// }
```

### í‘œì • ë³€í™” ë¡œê·¸
CharacterSprite ì»´í¬ë„ŒíŠ¸ì— ë¡œê·¸ ì¶”ê°€:

```typescript
useEffect(() => {
  console.log(`Expression changed: ${expression}`);
  const newImage = getCharacterImage(characterId, expression);
  console.log(`Image: ${newImage}`);
  // ...
}, [characterId, expression, currentImage]);
```

## ì£¼ì˜ì‚¬í•­

### 1. ê°ì • í‚¤ì›Œë“œ ìš°ì„ ìˆœìœ„
ë” êµ¬ì²´ì ì¸ ê°ì • í‚¤ì›Œë“œê°€ ìš°ì„ í•©ë‹ˆë‹¤:
- "í™”ë‚˜ì§€ë§Œ ì›ƒì–´" â†’ `anger` (ë” ê°•í•œ ê°ì •)
- "ì¢‹ê¸´ í•œë° ê±±ì •ë¼" â†’ `worry` (ë” êµ¬ì²´ì )

### 2. ë‚˜ë ˆì´ì…˜ ì²˜ë¦¬
ìºë¦­í„° ì´ë¦„ì´ "ë‚˜ë ˆì´ì…˜"ì¸ ê²½ìš° ìºë¦­í„°ê°€ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤:
```json
{
  "character_name": "ë‚˜ë ˆì´ì…˜",
  "text_template": "ê·¸ë‚  ë°¤, ë‹¬ì€ ë°ê²Œ ë¹›ë‚˜ê³  ìžˆì—ˆë‹¤."
}
```

### 3. ë¹ˆ ëŒ€ì‚¬ ì²˜ë¦¬
ëŒ€ì‚¬ê°€ ë¹„ì–´ìžˆê±°ë‚˜ nullì¸ ê²½ìš° ê¸°ë³¸ í‘œì •(`smile`)ì´ ì ìš©ë©ë‹ˆë‹¤.

## ì„±ëŠ¥ ìµœì í™” íŒ

### 1. ì´ë¯¸ì§€ í”„ë¦¬ë¡œë“œ
```typescript
import { preloadCharacterImages } from './utils/characterAssets';

// App ì‹œìž‘ ì‹œ
useEffect(() => {
  preloadCharacterImages()
    .then(() => console.log('ëª¨ë“  ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ'))
    .catch(err => console.error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', err));
}, []);
```

### 2. ë©”ëª¨ì´ì œì´ì…˜
```typescript
const currentExpression = useMemo(() =>
  currentDialogue?.emotion || detectEmotion(currentDialogue?.text_template || ''),
  [currentDialogue]
);
```

### 3. ë””ë°”ìš´ì‹±
ë¹ ë¥¸ ëŒ€í™” ì „í™˜ ì‹œ í‘œì • ë³€í™” ë””ë°”ìš´ì‹±:
```typescript
const [debouncedExpression, setDebouncedExpression] = useState(expression);

useEffect(() => {
  const timer = setTimeout(() => {
    setDebouncedExpression(expression);
  }, 100);
  return () => clearTimeout(timer);
}, [expression]);
```
